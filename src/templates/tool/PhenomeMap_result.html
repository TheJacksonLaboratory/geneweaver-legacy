{% set title=tool.name + " Results" %}
{% include 'header.html' %}
{% import 'macros.html' as macros %}

<div class="page-header" xmlns="http://www.w3.org/1999/html">
    <h1>{{ title }}</h1>
</div>

<div class="row">
    <div class="col-md-12 link-panel" style="text-align: center;">
        <iframe style="width:90%; height:95%; min-height: 550px;" src="{{ url_for('static_results', filename=async_result.task_id + '.svg') }}"></iframe>

            {if substr(async_result.result_image,-8)==".graphml"}

                <!-- JSON support for IE (needed to use JS API) -->
                <script type="text/javascript" src="/js/cytoscape/json2.min.js"></script>
                <!-- Flash embedding utility (needed to embed Cytoscape Web) -->
                <script type="text/javascript" src="/js/cytoscape/AC_OETags.min.js"></script>
                <!-- Cytoscape Web JS API (needed to reference org.cytoscapeweb.Visualization) -->
                <script type="text/javascript" src="/js/cytoscape/cytoscapeweb.min.js"></script>
                <!-- Cytoscape settings and graph rendering for tool output -->
                <script type="text/javascript" src="/js/cytoscape/PhenomeMap.js"></script>
                <div id="PhenomeMap_cyt" style="position: relative; margin: 10px auto; height: 400px; width: 95%; border-style: solid;">
                    <br/>
                    <br/>
                    Loading Hierarchical Similarity Graph...<br/>
                    <br/>
                    <br/>
                </div>
                <!-- js file for heatmap color interpolations -->
                <!-- <script src="http://d3js.org/d3.v3.min.js"></script> -->
                <a id="viewSize" href="">Enlarge View</a> |
                <a href="/index.php?action=analyze&cmd=view&run={async_result.res_runhash}&viewType=svg">Static View</a> |
                <a href="/index.php?action=analyze&cmd=convert&file={async_result.res_runhash}.svg">Export Graph as a PDF</a>
                {% include 'tools/PhenomeMap_options.html' %}

                {if (async_result.notes)}
                    <p class="message"><b style="color: #555;font-weight:bold;">Notes on this result:</b><br/>{async_result.notes}</p>
                {/if}


                <div id="stats" align="left" style="float: left; margin: 10px">
                    <h3>Statistics</h3>
                </div>
                <div id="shortcuts" align="left" style="float: left; margin: 10px">
                    <h3>Shortcuts</h3>
                    <table>
                        <tr><td><b>Zoom in:</b></td><td>double click background</br></td></tr>
                        <tr><td><b>Zoom out:</b></td><td>shift + double click background</br></td></tr>
                        <tr><td><b>Panning mode:</b></td><td> drag background</br></td></tr>
                    </table>
                </div>
            {/if}

        <br />
        <a href="{{ url_for('static_results', filename=async_result.task_id + '.pdf') }}">Export Phenome Map as a PDF</a>
        -
        <a target="_blank" href="{{ url_for('static_results', filename=async_result.task_id + '.svg') }}">Open in new window</a>
    </div>
</div>

{% include 'footer.html' %}
