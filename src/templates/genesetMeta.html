{# MetaContent About Genesets on GeneSet View Page #}

<div class="panel-body">
    <div class="row">
        <div class="col-xs-12 col-md-9">
            <div id="geneset-meta">
                <div class="row">
                    <div class="col-md-2">
                        <p class="text-right"><strong>DESCRIPTION:</strong></p>
                    </div>
                    <div class="col-md-10">
                        <p>{{ geneset.description }}</p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-2">
                        <p class="text-right"><strong>LABEL:</strong></p>
                    </div>
                    <div class="col-md-10">
                        <p>{{ geneset.abbreviation }}</p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-2">
                        <p class="text-right"><strong>DATE ADDED:</strong></p>
                    </div>
                    <div class="col-md-10">
                        {{ geneset.creation_date }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-2">
                        <p class="text-right"><strong>SPECIES:</strong></p>
                    </div>
                    <div id="sp-tag" class="col-md-10">
                        <span class="sp-tag-{{geneset.sp_id}}"></span>
                    </div>
                </div>

                {% if geneset.uri %}
                    <div class="row">
                        <div class="col-md-2">
                            <p class="text-right"><strong>URI:</strong></p>
                        </div>
                        <div class="col-md-10">
                            {% if geneset.uri %}
                                <a href="{{ geneset.uri }}">{{ geneset.uri }}</a>
                            {% else %}
                                None
                            {% endif %}
                        </div>
                    </div>
                {% endif %}

                {% if geneset.publication %}
                    <div class="row">
                        <div class="col-md-2">
                            <p class="text-right"><strong>AUTHORS:</strong></p>
                        </div>
                        <div class="col-md-10">
                            {% if geneset.publication.authors %}
                                {{ geneset.publication.authors }}
                            {% else %}
                                None
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-2">
                            <p class="text-right"><strong>TITLE:</strong></p>
                        </div>

                        <div class="col-md-10">
                            {% if geneset.publication.title %}
                                <i>{{ geneset.publication.title }}</i>
                            {% else %}
                                None
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-2">
                            <p class="text-right"><strong>JOURNAL:</strong></p>
                        </div>

                        <div class="col-md-10">
                            {% if geneset.publication.journal %}
                                <u>{{ geneset.publication.journal }}</u>
                                {{ geneset.publication.month }} {{ geneset.publication.year }},
                                Vol {{ geneset.publication.volume }}, pp. {{ geneset.publication.pages }}
                            {% else %}
                                None
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-2">
                            <p class="text-right"><strong>ABSTRACT:</strong></p>
                        </div>
                        <div class="col-md-10">
                            {% if geneset.publication.abstract %}
                                {{ geneset.publication.abstract }}
                            {% else %}
                                None
                            {% endif %}
                            {% if geneset.publication.pubmed_id %}
                                <a href="http://www.ncbi.nlm.nih.gov/pubmed/{{ geneset.publication.pubmed_id }}">
                                    <b>PUBMED: {{ geneset.publication.pubmed_id }}</b>
                                </a>

                                <br>
                                <!-- TODO link this with a search for this pubmed ID -->
                                <a href="../findPublications/{{ geneset.geneset_id }}">Find other GeneSets from this publication <i class="fa fa-search"></i></a>
                            {% endif %}
                        </div>
                    </div>

                {% else %}

                    <div class="row">
                        <div class="alert bg-gray-light">No publication information is associated with this GeneSet.</div>
                    </div>


                {% endif %}
            </div>

            {# Annotation Information #}
            <div class="panel-heading" style="border-bottom-width: thick; border-bottom-color: #006400;">
                <h2 class="panel-title">
                    Annotation Information
                </h2>
            </div>

            <div style="margin-left: 1em;">
                <br>
                <div class="row">
                    <div class="panel panel-default panel-heading bg-gray-light">
                        <h3 class="panel-title"><strong>GeneSet Ontology Annotations</strong>
                            <span id="genesetOntologyInfo" tabindex="0" data-trigger="focus"><i class="fa fa-info-circle"></i></span></h3>
                    </div>
                </div>
                <div class="row">
                    <div id="genesetOntologyAlert" class="alert alert-warning fade in" style="margin-top: 0px; width: 100%;">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">x</button>
                        Go to the
						<a href="/editgeneset/{{geneset.geneset_id}}">
							Edit MetaContent 
						</a>
						page to change ontology annotations.
                    </div>
                </div>
                <div class="row">
                        <ul style="list-style-type:disc; margin-left: 2em;">
                            {% for ont in ontology %}
                                <li style="font-size:13px">
                                    <span style="color:#000;">
                                        {{ ont.reference_id }}:
                                    </span>
                                    <span style="color:#000;font-weight:bold;">
                                        {{ ont.name }}
                                    </span>
                                    <span style="color:#777;">
                                        ({{ ont.dbname }})
                                    </span>
                                </li>
                            {% endfor %}
                        </ul>
                </div>
            </div>

            <script>

                //Popover that gives Geneset Ontology functionality overview for the user
                //Displayed when ontologies are linked with the geneset
                $('#genesetOntologyInfo').popover({
                        title: 'GeneSet Ontologies', content: 'Ontologies linked to the current GeneSet are ' +
                        'shown below as the highlighted nodes within the ontology databases. Only available to edit ' +
                        'on the "Edit MetaContent" page.'
                });
            </script>
        </div>

