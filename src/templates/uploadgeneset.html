{% set title="Upload Geneset" %}
{% include 'header.html' %}
{% import 'macros.html' as macros %}

<script>

$(document).ready(function()  {

	//$('#manual-entry-button').click(function() {
	//	alert("test");
	//});
	//$('#save-changes-button').click(function() {
	//	alert("test");	
	//});

	$('#upload-geneset-form').submit(function(event) {
		event.preventDefault();
		var data = $("#upload-geneset-form").serialize();
 		$.ajax({
          		type: "POST",
           		url: "../creategeneset.html",
           		data: data,
			success: function(data)
           		{
			    alert("Success");	
           		}
         	    });		   
		
	});

	
});

function toggle_pasting() {
    $("#paste_uploader").toggle();
    $("#file_uploader").toggle();
}


</script>



<div class="page-header">
    <h1>Upload Geneset</h1>
</div>
<p>
    Use this page to upload a geneset.<br>A * indicates required fields.
</p>
<form id="upload-geneset-form">
    <h2>Geneset Metadata</h2>
    <p>
        Please enter some descriptive info about this GeneSet. In order to ensure rapid acceptance by our curation team or, in the case of private data, maximum integration into the existing GeneWeaver dataset, please confirm that your GeneSet Metadata meets the guidlines outlined in our <a href="http://geneweaver.org/wiki/index.php?title=Curation_Standards">Curation Standards</a>
    </p>
    <div class="row">
        <div class="col-md-2">
            GeneSet Name*:
        </div>
        <div class="col-md-4">
            <input type="text" name="gs_name">
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2">	
            GeneSet Figure Label*:
        </div>
        <div class="col-md-4">
            <input type="text" name="gs_abbreviation">
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2">
            GeneSet Description*:
        </div>
        <div class="col-md-4">
            <input type="text" name="gs_description">
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2">
            Access Restrictions*:
        </div>
        <div class="col-xs-4">
            <select name="public_private" class="form-control">
                <option value="private">Private</option>
                <option value="public">Public</option>
            </select>
        </div>
    </div>
    <br>
    <h2>Reference Info</h2>
    <p>
        If this experiment has been published and listed in PubMed, just enter the Pubmed ID below to automatically fill in the publication info, otherwise you may manually enter publication information. Providing this will allow others to discover and use your data more quickly, provide a means to link here directly from PubMed, and streamline our curation efforts.
    </p>
    <div class="row">
        <div class="col-md-2">
            PubMed ID:
        </div>
        <div class="col-md-4">
            <input type="text" name="pub_pubmed">
        </div>
    </div>
    <br>
    <button class="btn bg-blue">Manual Entry</button><br><br>
    <h2>Gene List</h2>
    <p>
        Provide a list of genes to associate with the descriptive info from above.
    </p>
    <div class="row">
        <div class="col-md-2">
            Species*:
        </div>
        <div class="col-xs-6 col-sm-4">
            <select name="species" class="form-control" name="sp_id">
                {% for spec in all_species %}    
                <option label="{{all_species[spec]}}" value="{{spec}}">{{all_species[spec]}}</option>
                {% endfor %} 
            </select>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2">
            Gene Identifiers*:
        </div>
        <div class="col-xs-6 col-sm-4">
            <select name="gene_identifier" class="form-control">
                <option value="0"></option>
                {% for id in gidts %}
                {% if id[0] != "MicroArrays" %}
                <option label="{{id[1]}}" value="{{id[0]}}">{{id[1]}}</option>
                {% else %}
                <optgroup label="MicroArrays">
                    {% for val in id[1] %}
                    <option label="{{val[1]}}" value="{{val[0]}}">{{val[1]}}</option>
                    {% endfor %}
                </optgroup>
                {% endif %}
                {% endfor %}
            </select>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2">
            Input Gene List*:
        </div>
        <div id="file_uploader" class="col-md-4" style="display:none">
            Select a Tab-separated Plain Text…
            <br></br>
            <input id="file" type="file" name="file"></input>
            <br></br>
            <button class="button" onclick="toggle_pasting()">Switch back to text box </button>
        </div>
        <div id="paste_uploader" class="col-md-4" style="display:block">
            <b>Have a text file already handy?</b>
            <button class="button" onclick="toggle_pasting()">Switch to file upload </button>
            <br></br>	
            <textarea id="file_text" rows="20" cols="64" name="file_text" original-title="List your genes of interest, one per line. If you have per-g…t; 0.92 gene2 &lt;tab&gt; 0.81 gene3 &lt;tab&gt; 0.87 </pre>"></textarea>
        </div>
    </div>
    <br>
    <button id="save-changes-button" class="btn bg-blue">Save Changes</button>
</form>



{% include 'footer.html' %}
